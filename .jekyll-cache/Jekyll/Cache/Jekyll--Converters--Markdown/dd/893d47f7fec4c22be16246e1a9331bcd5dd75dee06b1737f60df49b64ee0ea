I"¥<h2 id="å‰è¨€">å‰è¨€</h2>
<p>å’ŒJavaä¸åŒ,c++ä¸­éœ€è¦æ‰‹åŠ¨é‡Šæ”¾åˆ†é…çš„å†…å­˜.<br />
å¦åˆ™,ä¼šé€ æˆå†…å­˜æ³„æ¼.<br />
è€Œåœ¨cocosä¸­å¹¶ä¸éœ€è¦æˆ‘ä»¬ä¸»åŠ¨é‡Šæ”¾.<br />
å®ƒå€Ÿé‰´äº†objective-cçš„å†…å­˜ç®¡ç†çš„æœºåˆ¶,é‡‡ç”¨äº†è‡ªåŠ¨é‡Šæ”¾æ± æ¥è¿›è¡Œå†…å­˜ç®¡ç†.</p>
<h2 id="åˆ†æ">åˆ†æ</h2>
<p>åœ¨å¯¹è±¡çš„åˆå§‹åŒ–ä¸­,ç»å¸¸å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ä»£ç :</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">Scene</span> <span class="o">*</span><span class="n">ret</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">nothrow</span><span class="p">)</span> <span class="n">Scene</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&amp;&amp;</span> <span class="n">ret</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">ret</span><span class="o">-&gt;</span><span class="n">autorelease</span><span class="p">();</span>
        <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
    <span class="p">}</span></code></pre></figure>

<p>autoreleaseå‡½æ•°å°±æ˜¯è‡ªåŠ¨ç®¡ç†å†…å­˜çš„å…³é”®.<br />
é€šè¿‡æŸ¥çœ‹å†…éƒ¨ä»£ç ,æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„æ„é€ å¦‚ä¸‹.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">Ref</span><span class="o">*</span> <span class="n">Ref</span><span class="o">::</span><span class="n">autorelease</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">PoolManager</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getCurrentPool</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addObject</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>ä¸æ€¥ç€å¾€ä¸‹çœ‹,å…ˆæ¥äº†è§£ä¸€ä¸‹Refè¿™ä¸ªç±».</p>
:ET