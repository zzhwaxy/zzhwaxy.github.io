---
layout: post
title: 数据类型和宽度
---
## 计算机是否能识别数据类型

这是一个很有意思的问题。

众所周知，计算机是二进制的世界。

一切数据在磁盘和内存中都是以二进制的形式展现，只不过为了表示方便，写成16进制。

计算机只能识别二进制数。

而数据类型是我们自己定义的，它表示成什么，取决于我们定义成什么。


**只有同时确定了数据类型和宽度，才能正确表示一个数的大小。**


## 宽度

了解一些计算机运行原理就知道，计算机寻址的宽度受限于位数。

比如32位系统最大寻址4G,64位操作系统最大寻址16EB($$2^{64}$$字节)。

基本数据按宽度可分为byte(字节，最小单位)，word(字)，dword（双字，32位操作系统），qword(四字，64位操作系统**。

不同宽度的数据之间不能直接赋值，得先扩展位或者截断。

如果在c语言中，对不同类型的操作数进行数学运算，可能会发生溢出，造成一些意想不到的后果。


## 浮点数

float 和 double

这个原理解释起来挺麻烦的，过两天再写。

## 符号和补码

如果给你 **一个字节** ，比如0xFF，你认为它的十进制大小是多少呢？

可能有人回答是255，有人回答是-1.

还有人可能会说你都没给定数据类型，这谁知道呢。

确实，对于一个数，有符号和无符号的表示的值差异还是挺大的。

下面来看一下数学定义。

无符号数数学定义 $$B2U_𝒘 = \sum_{i=0}^{𝒘-1}x_i2^i$$

有符号数数学定义 $$B2T_𝒘 = -x_{𝒘-1}2^{𝒘-1} + \sum_{i=0}^{𝒘-2}x_i2^i$$

由定义可知，对于有符号数，它的正负取决于*符号位*。

符号位为1时为负，否则为正。而无符号数始终为正。

由此可以算出：

无符号时，$$0XFF=2^7+2^6+2^5+2^4+2^3+2^2+2^2+2^1+2^0=255$$

有符号时，$$0XFF=-2^7+2^6+2^5+2^4+2^3+2^2+2^2+2^1+2^0=-1$$

接着我们可以算出它们的表示范围：

无符号数表示的范围 $$0～2^n-1$$

有符号数表示的范围 $$-2^{n-1}-1$$  ~  $$2^{n-1}$$
(n是位数)


在计算机中，有符号数用补码表示。

从上面可以观察出来，有符号数的正数补码为它本身，负数补码为取反加一。

所以，只有为负数时，它的补码才有意义。











